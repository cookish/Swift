<project><!-- CACHE ID c36d2d3c-9ec3-4242-9e0e-49b080806416 -->
  <import file="sys.xml"/>
  <import file="scheduler.xml"/>
  <import file="rlog.xml"/>
  <import file="vdl.k"/>
  <global name="swift#string#17000">
    <vdl:new type="string" value="_SWIFT_AUTO_INCREMENT" />
  </global>
  <global name="swift#string#17001">
    <vdl:new type="string" value="key" />
  </global>
  <global name="swift#int#1">
    <vdl:new type="int" value="1" />
  </global>
  <global name="swift#int#2">
    <vdl:new type="int" value="2" />
  </global>
  <set name="array">
    <vdl:new type="int[][]" dbgname="array" waitfor="88003">
      <vdl:mapping descriptor="concurrent_mapper">
        <vdl:parameter name="prefix">array-74b87366-e794-47db-97c9-67fc587bb818</vdl:parameter>
      </vdl:mapping>
    </vdl:new>
  </set>
  <parameterlog>
  <string>intermediate</string>
  <string>array</string>
  <vdl:getdatasetprovenanceid var="{array}" />
  <string>{#thread}</string>
  </parameterlog>
  <restartLog>
  	<vdl:mains>
		<vdl:startprogressticker />
		<vdl:mainp>
		    <sequentialWithID>
		        <sequential>
		          <vdl:tparallelFor name="$">
		            <getarrayiterator><sequential>
		           <set name="swift#from"><variable>swift#int#1</variable></set>
		           <set name="swift#to"><variable>swift#int#2</variable></set>
		           <set name="swift#rangeout">
		            <vdl:range>
		              <argument name="from"><variable>swift#from</variable></argument>
		              <argument name="to"><variable>swift#to</variable></argument>
		            </vdl:range>
		           </set>
		           <if><equals><vdl:configProperty><string>provenance.log</string></vdl:configProperty><string>true</string></equals>
		           <then>
		           <log level="info"><concat>
		              <string>ARRAYRANGE thread={#thread} array=</string>
		              <vdl:getdatasetprovenanceid var="{swift#rangeout}" />
		              <string> from=</string> <vdl:getdatasetprovenanceid var="{swift#from}" />
		              <string> to=</string> <vdl:getdatasetprovenanceid var="{swift#to}" />
		              <string> step=none</string>
		           </concat></log>
		           </then>
		           </if>
		           <variable>swift#rangeout</variable>
		          </sequential></getarrayiterator>
		            <set names="$$, dummy">
		              <each items="{$}"/>
		            </set>
		          	<log level="debug" message="FOREACH_IT_START line=2 thread={#thread}"/>
		          <log level="debug"><string>SCOPE thread={#thread}</string></log>

		                <parallel>
		                    <sequential>
		                         <vdl:setfieldvalue>
		                           <argument name="var">
		                             <vdl:getfieldsubscript>
		                               <argument name="var"><vdl:getfieldsubscript>
		                               <argument name="var"><variable>array</variable></argument>
		                               <argument name="subscript"><variable>swift#string#17001</variable></argument>
		                             </vdl:getfieldsubscript></argument>
		                               <argument name="subscript"><variable>swift#string#17000</variable></argument>
		                             </vdl:getfieldsubscript>
		                           </argument>
		                           <argument name="value">
		                             <variable>swift#int#1</variable>
		                           </argument>
		                         </vdl:setfieldvalue>
		                    </sequential>
		                    <sequential>
		                         <vdl:setfieldvalue>
		                           <argument name="var">
		                             <vdl:getfieldsubscript>
		                               <argument name="var"><vdl:getfieldsubscript>
		                               <argument name="var"><variable>array</variable></argument>
		                               <argument name="subscript"><variable>swift#string#17001</variable></argument>
		                             </vdl:getfieldsubscript></argument>
		                               <argument name="subscript"><variable>swift#string#17000</variable></argument>
		                             </vdl:getfieldsubscript>
		                           </argument>
		                           <argument name="value">
		                             <variable>swift#int#2</variable>
		                           </argument>
		                         </vdl:setfieldvalue>
		                    </sequential>
		                    <sequential>
		                      <vdl:tparallelFor name="$">
		                        <getarrayiterator><vdl:getfieldsubscript>
		                        <argument name="var"><variable>array</variable></argument>
		                        <argument name="subscript"><variable>swift#string#17001</variable></argument>
		                      </vdl:getfieldsubscript></getarrayiterator>
		                        <set names="$$, v">
		                          <each items="{$}"/>
		                        </set>
		                      	<log level="debug" message="FOREACH_IT_START line=5 thread={#thread}"/>
		                      <log level="debug"><string>SCOPE thread={#thread}</string></log>

		                            <sequentialWithID>
		                                <sequential>
		                                  <sequential>
		                                  <log level="debug" message="INTERNALPROC_START thread={#thread} name=trace"/>
		                                  <set name="swift#cs"><variable>#thread</variable></set>
		                                  <trace>
		                                    <parallel>
		                                      <sequential>
		                                        <set name="swift#callInternalValue"><variable>v</variable></set>
		                                        <parameterlog>
		                                          <string>input</string>
		                                          <string>TODO_name_or_pos</string>
		                                          <vdl:getdatasetprovenanceid var="{swift#callInternalValue}" />
		                                          <string>{swift#cs}</string>
		                                        </parameterlog>
		                                        <variable>swift#callInternalValue</variable>
		                                      </sequential>
		                                    </parallel>
		                                  </trace>
		                                  <log level="debug" message="INTERNALPROC_END thread={#thread}"/>
		                                  </sequential>
		                                </sequential>
		                            </sequentialWithID>
		                          <log level="debug" message="FOREACH_IT_END line=5 thread={#thread}"/>
		                      </vdl:tparallelFor>
		                    </sequential>
		                </parallel>
		              <log level="debug" message="FOREACH_IT_END line=2 thread={#thread}"/>
		          </vdl:tparallelFor>
		            <partialCloseDataset var="{array}" closeID="88003" />
		        </sequential>
		    </sequentialWithID>
		</vdl:mainp>
		<vdl:stopprogressticker />
	</vdl:mains>
  </restartLog>  
</project>
