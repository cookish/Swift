<project><!-- CACHE ID 1552ab4d-6464-454f-aabc-c250f3c147b2 -->
  <import file="sys.xml"/>
  <import file="scheduler.xml"/>
  <import file="rlog.xml"/>
  <import file="vdl.k"/>
  <types>
     <xs:schema targetNamespace="http://ci.uchicago.edu/swift/2009/02/swiftscript" xmlns="http://ci.uchicago.edu/swift/2009/02/swiftscript" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema">
      	   <xs:complexType name="mystruct">
      	   <xs:sequence>
      	        <xs:element name="a" type="int"/>
      	        <xs:element name="b" type="int"/>
      	   </xs:sequence>
      	   </xs:complexType>  
     </xs:schema>	 
  </types>
  <global name="swift#int#1">
    <vdl:new type="int" value="1" />
  </global>
  <global name="swift#int#2">
    <vdl:new type="int" value="2" />
  </global>
  <global name="swift#int#101">
    <vdl:new type="int" value="101" />
  </global>
  <global name="swift#int#55">
    <vdl:new type="int" value="55" />
  </global>
  <global name="swift#int#202">
    <vdl:new type="int" value="202" />
  </global>
  <global name="swift#int#11">
    <vdl:new type="int" value="11" />
  </global>
  <set name="array">
    <vdl:new type="int[int][mystruct]" dbgname="array" waitfor="88004 88005">
      <vdl:mapping descriptor="concurrent_mapper">
        <vdl:parameter name="prefix">array-064a32bb-9a81-4c8d-bb42-4e7ad0c4c09c</vdl:parameter>
      </vdl:mapping>
    </vdl:new>
  </set>
  <parameterlog>
  <string>intermediate</string>
  <string>array</string>
  <vdl:getdatasetprovenanceid var="{array}" />
  <string>{#thread}</string>
  </parameterlog>
  <set name="xx">
    <vdl:new type="mystruct" dbgname="xx" waitfor="88000 88001">
      <vdl:mapping descriptor="concurrent_mapper">
        <vdl:parameter name="prefix">xx-e245587f-58a4-4c29-a727-22568d89fcfe</vdl:parameter>
      </vdl:mapping>
    </vdl:new>
  </set>
  <parameterlog>
  <string>intermediate</string>
  <string>xx</string>
  <vdl:getdatasetprovenanceid var="{xx}" />
  <string>{#thread}</string>
  </parameterlog>
  <set name="yy">
    <vdl:new type="mystruct" dbgname="yy" waitfor="88002 88003">
      <vdl:mapping descriptor="concurrent_mapper">
        <vdl:parameter name="prefix">yy-a9ffade8-7ecb-496f-b4a9-583f38cbf2ca</vdl:parameter>
      </vdl:mapping>
    </vdl:new>
  </set>
  <parameterlog>
  <string>intermediate</string>
  <string>yy</string>
  <vdl:getdatasetprovenanceid var="{yy}" />
  <string>{#thread}</string>
  </parameterlog>
  <restartLog>
  	<vdl:mains>
		<vdl:startprogressticker />
		<vdl:mainp>
		    <parallel>
		        <sequential>
		             <vdl:setfieldvalue>
		               <argument name="var">
		                 <getfield>
		                   <argument name="var"><variable>xx</variable></argument>
		                   <argument name="path">a</argument>
		                 </getfield>
		               </argument>
		               <argument name="value">
		                 <variable>swift#int#1</variable>
		               </argument>
		             </vdl:setfieldvalue>
		            <partialCloseDataset var="{xx}" closeID="88000" />
		        </sequential>
		        <sequential>
		             <vdl:setfieldvalue>
		               <argument name="var">
		                 <getfield>
		                   <argument name="var"><variable>xx</variable></argument>
		                   <argument name="path">b</argument>
		                 </getfield>
		               </argument>
		               <argument name="value">
		                 <variable>swift#int#2</variable>
		               </argument>
		             </vdl:setfieldvalue>
		            <partialCloseDataset var="{xx}" closeID="88001" />
		        </sequential>
		        <sequential>
		             <vdl:setfieldvalue>
		               <argument name="var">
		                 <getfield>
		                   <argument name="var"><variable>yy</variable></argument>
		                   <argument name="path">a</argument>
		                 </getfield>
		               </argument>
		               <argument name="value">
		                 <variable>swift#int#101</variable>
		               </argument>
		             </vdl:setfieldvalue>
		            <partialCloseDataset var="{yy}" closeID="88002" />
		        </sequential>
		        <sequential>
		             <vdl:setfieldvalue>
		               <argument name="var">
		                 <getfield>
		                   <argument name="var"><variable>yy</variable></argument>
		                   <argument name="path">b</argument>
		                 </getfield>
		               </argument>
		               <argument name="value">
		                 <variable>swift#int#202</variable>
		               </argument>
		             </vdl:setfieldvalue>
		            <partialCloseDataset var="{yy}" closeID="88003" />
		        </sequential>
		        <sequential>
		             <vdl:setfieldvalue>
		               <argument name="var">
		                 <vdl:getfieldsubscript>
		                   <argument name="var"><vdl:getfieldsubscript>
		                   <argument name="var"><variable>array</variable></argument>
		                   <argument name="subscript"><variable>swift#int#1</variable></argument>
		                 </vdl:getfieldsubscript></argument>
		                   <argument name="subscript"><variable>xx</variable></argument>
		                 </vdl:getfieldsubscript>
		               </argument>
		               <argument name="value">
		                 <variable>swift#int#55</variable>
		               </argument>
		             </vdl:setfieldvalue>
		            <partialCloseDataset var="{array}" closeID="88004" />
		        </sequential>
		        <sequential>
		             <vdl:setfieldvalue>
		               <argument name="var">
		                 <vdl:getfieldsubscript>
		                   <argument name="var"><vdl:getfieldsubscript>
		                   <argument name="var"><variable>array</variable></argument>
		                   <argument name="subscript"><variable>swift#int#1</variable></argument>
		                 </vdl:getfieldsubscript></argument>
		                   <argument name="subscript"><variable>yy</variable></argument>
		                 </vdl:getfieldsubscript>
		               </argument>
		               <argument name="value">
		                 <variable>swift#int#11</variable>
		               </argument>
		             </vdl:setfieldvalue>
		            <partialCloseDataset var="{array}" closeID="88005" />
		        </sequential>
		        <sequential>
		          <vdl:tparallelFor name="$">
		            <getarrayiterator><vdl:getfieldsubscript>
		            <argument name="var"><variable>array</variable></argument>
		            <argument name="subscript"><variable>swift#int#1</variable></argument>
		          </vdl:getfieldsubscript></getarrayiterator>
		            <set names="$$, v">
		              <each items="{$}"/>
		            </set>
		          	<log level="debug" message="FOREACH_IT_START line=18 thread={#thread}"/>
		          <log level="debug"><string>SCOPE thread={#thread}</string></log>

		                <sequentialWithID>
		                    <sequential>
		                      <sequential>
		                      <log level="debug" message="INTERNALPROC_START thread={#thread} name=trace"/>
		                      <set name="swift#cs"><variable>#thread</variable></set>
		                      <trace>
		                        <parallel>
		                          <sequential>
		                            <set name="swift#callInternalValue"><variable>v</variable></set>
		                            <parameterlog>
		                              <string>input</string>
		                              <string>TODO_name_or_pos</string>
		                              <vdl:getdatasetprovenanceid var="{swift#callInternalValue}" />
		                              <string>{swift#cs}</string>
		                            </parameterlog>
		                            <variable>swift#callInternalValue</variable>
		                          </sequential>
		                        </parallel>
		                      </trace>
		                      <log level="debug" message="INTERNALPROC_END thread={#thread}"/>
		                      </sequential>
		                    </sequential>
		                </sequentialWithID>
		              <log level="debug" message="FOREACH_IT_END line=18 thread={#thread}"/>
		          </vdl:tparallelFor>
		        </sequential>
		    </parallel>
		</vdl:mainp>
		<vdl:stopprogressticker />
	</vdl:mains>
  </restartLog>  
</project>
